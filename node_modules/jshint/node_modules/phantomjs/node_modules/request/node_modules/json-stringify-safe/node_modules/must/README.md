Must.js
=======
[![NPM version][npm-badge]](http://badge.fury.io/js/must)
[![Build status][travis-badge]](https://travis-ci.org/moll/js-must)
[npm-badge]: https://badge.fury.io/js/must.png
[travis-badge]: https://travis-ci.org/moll/js-must.png?branch=master

Must.js is a testing and assertion library for JavaScript and Node.js with
a friendly **BDD** syntax (`awesome.must.be.true()`). It ships with **many
expressive matchers** and is **test runner and framework agnostic**. Follows
[RFC 2119][rfc2119] with its use of **MUST**. Good and well testsed stuff.

For those new to testing JavaScript on Node.js, you'll also need a test
framework (also called a test-runner or a harness) to run your tests. One such
tool is [Mocha][mocha].

[rfc2119]: https://www.ietf.org/rfc/rfc2119.txt
[mocha]: http://visionmedia.github.io/mocha

### Tour
- Assert with a **beautiful and fluent chain** that saves you from wrapping
  objects manually and reads nicely, too:
  ```javascript
  obj.must.be.true()
  ```

- Supports the **expect flavor** of wrapping as well:
  ```javascript
  var demand = require("must")
  demand(obj).be.string()
  ```

- **Many expressive matchers** out of the box, including:
  ```javascript
  [].must.be.empty()
  obj.must.have.nonenumerable("foo")
  (42).must.be.above(13)
  ```

- **Simple**, because **matchers always behave the same way** and don't depend
  on any "special flags" in the chain. They are also **not interdependent** the
  way `foo.should.have.property(x).with.lengthOf(5)` would be.

- **Reasonable**, because it asserts only when you call the matcher
  `[].must.be.empty()` and not when you merely get the property `empty`. See
  below why [asserting on property access](#asserting-on-property-access) is
  **dangerous** in other assertion libraries.

- Has an **intelligent and type-safe** recursive [`eql`][Must.prototype.eql]
  matcher that compares arrays and objects by content and supports value
  objects.  It's fully type-safe, so instances of *different classes* aren't
  *eql*, even if their properties are. It also supports **circular and
  self-referential** objects.
  ```javascript
  primesBelowTen.must.eql([2, 3, 5, 7])
  model.attributes.must.eql({title: "New", createdAt: new Date(2000, 1, 1)})
  ```

[Must.prototype.eql]: https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.eql

- **Human readable error messages** let you know if an object wasn't what you
  expected.

- Honors [RFC 2119][rfc2119] by using the word **MUST** because your
  tests assert things, they don't list wishes or prayers, right? Exactly!
  `Foo.must.equal(42)`, not `foo.pretty.please.equal(42)`.

- Works with any test runner and framework.  
- Avoids type coercions and mismatches.
- Well tested — over 750 cases in over 2500 lines of tests. That makes a test to
  code ratio of 5:1.

### Using Should.js or Chai.js? Switch for safety!
Among other things, one reason why [Should.js][should.js] and [Chai.js][chai.js]
inspired me to write Must.js is that they have a **fundamental design mistake**
that makes them both **surprising in a bad way** and **dangerous to use**. [Read
more below](#asserting-on-property-access).


Installing
----------
**Note**: Must.js will follow the [semantic versioning](http://semver.org/)
starting from v1.0.0.

### Installing on Node.js
```
npm install must
```

### Installing for the browser
Must.js doesn't yet have a build ready for the browser, but you might be able
to use [Browserify][browserify] to have it run there till then.

[browserify]: https://github.com/substack/node-browserify


Using
-----
To use the **fluent chain**, just require Must.js and it'll make itself
available everywhere:
```javascript
require("must")
```

Then just access the `must` property on any object and call matchers on it.
```javascript
answer.must.equal(42)
new Date().must.be.an.instanceof(Date)
```

If you wish to use the **expect flavor**, assign Must to any name of your
choice, e.g:
```javascript
var expect = require("must")
var demand = require("must")
```

And call it with the object you wish to assert:
```javascript
expect(answer).to.equal(42)
demand(null).be.null()
```

For a list of all matchers, please see the [Must.js API Documentation][api].
[api]: https://github.com/moll/js-must/blob/master/doc/API.md

### Negative asserting or matching the opposite
To assert the opposite, just add `not` between the chain:
```javascript
true.must.not.be.false()
[].must.not.be.empty()
```

Use it multiple times to create lots of fun puzzles! :-)
```javascript
true.must.not.not.be.true()
```

### Asserting on null and undefined values
In almost all cases you can freely call methods on any object in JavaScript.
Except for `null` and `undefined`.

Most of the time this won't be a problem, because if you're asserting that
`something.must.be.true()` and `something` ends up `null`, the test will still
fail. If, however, you do need to assert its nullness, aliasing Must to `expect`
or `demand` and wrapping it manually works well:
```javascript
var demand = require("must")
demand(something).be.null()
demand(undefined).be.undefined()
```

### Autoloading
If your test runner supports an options file, you might want to require Must
there so you wouldn't have to remember to `require` in each test file.

For [Mocha][mocha], that file is `test/mocha.opts`:
```
--require must
```

### Full example
Inside a test runner or framework things would look something like this:
```javascript
require("must")
var MySong = require("../my_song")

describe("MySong", function() {
  it("must be creatable", function() {
    new MySong().must.be.an.instanceof(MySong)
  })

  it("must have cowbell", function() {
    new MySong().cowbell.must.be.true()
  })

  it("must not have pop", function() {
    new MySong().must.not.have.property("pop")
  })
})
```


API
---
For extended documentation on all matchers and other objects that come with
Must.js, please see the [Must.js API Documentation][api].

### [Must](https://github.com/moll/js-must/blob/master/doc/API.md#Must)
- [a](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.a)(class)
- [above](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.above)(expected)
- [after](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.after)(expected)
- [an](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.an)(class)
- [array](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.array)()
- [at](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.at)
- [be](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.be)(expected)
- [before](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.before)(expected)
- [below](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.below)(expected)
- [between](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.between)(begin, end)
- [boolean](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.boolean)()
- [contain](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.contain)(expected)
- [date](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.date)()
- [empty](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.empty)()
- [enumerable](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.enumerable)(property)
- [enumerableProperty](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.enumerableProperty)(property)
- [eql](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.eql)(expected)
- [equal](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.equal)(expected)
- [exist](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.exist)()
- [false](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.false)()
- [falsy](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.falsy)()
- [frozen](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.frozen)()
- [function](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.function)()
- [gt](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.gt)(expected)
- [gte](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.gte)(expected)
- [have](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.have)
- [include](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.include)(expected)
- [instanceOf](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.instanceOf)(class)
- [instanceof](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.instanceof)(class)
- [is](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.is)(expected)
- [keys](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.keys)(keys)
- [least](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.least)(expected)
- [length](https://github.com/moll/js-must/blob/master/doc/API.md#Must.prototype.length)(expected)
- [lt](https://github.com/moll/js-